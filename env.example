# =============================================================================
# WALLET PLATFORM - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env.dev for development or .env.ci for CI
# Never commit actual environment files with real credentials!

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
NODE_ENV=development
PORT_API=3001
PORT_WEB=3000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
# For Docker: postgresql://postgres:postgres@postgres:5432/wallet
# For local: postgresql://postgres:postgres@localhost:5432/wallet
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/wallet

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
# Directory for uploaded assets (images, etc.)
STORAGE_DIR=/app/uploads

# Directory for generated .pkpass files
PKPASS_OUTPUT_DIR=/app/passes

# =============================================================================
# APPLE WALLET SIGNING CONFIGURATION
# =============================================================================
# Development mode: use mock signing (no real certificates needed)
# Production mode: use real Apple certificates
DEV_SIGNING_MODE=mock

# Apple Developer Team Identifier (required for real signing)
# Get this from your Apple Developer account
PASS_TEAM_IDENTIFIER=TEAMID_DEV

# Pass Type Identifier (your app's bundle ID for passes)
# Format: pass.com.yourcompany.yourapp
PASS_TYPE_IDENTIFIER=pass.dev.local

# Organization Name (appears in Apple Wallet)
PASS_ORG_NAME=Dev Org

# =============================================================================
# APPLE WALLET CERTIFICATES (Production Only)
# =============================================================================
# Path to your Apple Pass Certificate (.p12 file)
# Only needed when DEV_SIGNING_MODE=real
APPLE_PASS_CERT_P12=./infra/certs/pass.p12

# Password for the Apple Pass Certificate
APPLE_PASS_CERT_PASSWORD=changeme

# Path to Apple WWDR Certificate (.pem file)
# Download from: https://developer.apple.com/certificationauthority/AppleWWDRCA.cer
APPLE_WWDR_CERT_PEM=./infra/certs/AppleWWDRCAG3.pem

# =============================================================================
# APPLE PUSH NOTIFICATION SERVICE (APNs)
# =============================================================================
# APNs mode: mock (development) or real (production)
APNS_MODE=mock

# APNs Topic (usually same as PASS_TYPE_IDENTIFIER)
APNS_TOPIC=pass.dev.local

# APNs Environment: sandbox or production
APNS_ENV=sandbox

# APNs Team ID (same as PASS_TEAM_IDENTIFIER)
APNS_TEAM_ID=TEAMID_DEV

# APNs Key ID (from Apple Developer account)
APNS_KEY_ID=ABC123XYZ

# Path to APNs Auth Key (.p8 file)
# Only needed when APNS_MODE=real
APNS_AUTH_KEY_P8=./infra/certs/AuthKey_ABC123XYZ.p8

# Alternative: APNs Certificate (.p12 file)
# Only needed when APNS_MODE=real
APNS_CERT_P12=./infra/certs/pass-push.p12
APNS_CERT_PASSWORD=changeme

# =============================================================================
# WEB SERVICE AUTHENTICATION
# =============================================================================
# Authentication scheme for Apple Wallet Web Service
PASS_WEB_AUTH_SCHEME=ApplePass

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================
# Enable debug logging
DEBUG=wallet-platform:*

# Log level: error, warn, info, debug
LOG_LEVEL=info

# =============================================================================
# SECURITY
# =============================================================================
# JWT secret for internal API authentication
JWT_SECRET=your-super-secret-jwt-key-change-in-production

# Rate limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000

# =============================================================================
# DOCKER & CONTAINER CONFIGURATION
# =============================================================================
# Container names (for Docker Compose)
POSTGRES_CONTAINER=postgres
API_CONTAINER=api
WEB_CONTAINER=web
WORKER_CONTAINER=worker
ADMINER_CONTAINER=adminer

# =============================================================================
# CI/CD CONFIGURATION
# =============================================================================
# CI environment flag
CI=false

# Test database URL (for CI)
TEST_DATABASE_URL=postgresql://postgres:postgres@postgres:5432/wallet_test
